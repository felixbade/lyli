{% extends "base.html" %}
{% block content %}

{% if showoptions %}
<a href="?showoptions=false"><span class="description">Piilota lisävalinnat</span></a>
{% else %}
<a href="?showoptions=true"><span class="description">Näytä lisävalinnat</span></a>
{% endif %}

<div>
    <img id="lyli-icon" class="center" src="/lyli.png" alt="Käsin piirretty Lyli"/>
</div>

{% if newurl %}
<div class="notification"><h2>Lyhentäminen onnistui!</h2>
    <a id="newurl" href="http://lyli.fi/{{newurl}}">http://lyli.fi/{{newurl}}</a><br>
    {% if brief or duration == "brief" %}
    <span class="description">Lyhyt linkki vapautuu tunnin päästä, käytettiin sitä tai ei.</span>
    {% elif duration == "once" %}
    <span class="description">Lyhyt linkki vapautuu ensimmäisen avauksen jälkeen.</span>
    {% else %}
    <span class="description">Lyhyt linkki vapautuu kun sitä ei ole käytetty kahteen viikkoon.</span>
    {% endif %}
</div>
{% endif %}

{% if nosuchname %}
<div class="notification"><h2>Linkkiä <span class="notfound">lyli.fi/{{nosuchname}}</span> ei ole olemassa.</h2>
    <span class="description">Se on saattanut olla joskus olemassa. Linkit vapautuvat automaattisesti.</span>
</div>
{% elif nosuchsite %}
<div class="notification"><h2>Sivua <span class="notfound">lyli.fi{{nosuchsite}}</span> ei ole olemassa.</h2>
</div>
{% endif %}

<form method="post" action="/beta/" novalidate>
    <div>
        <input class="big" type="url" name="url" id="url" placeholder="Sijoita pitkä linkki tähän" value="{{url}}">
        {% if emptyurl %}
        <span class="error">Tässä ei ole mitään.</span>
        {% elif illegalscheme %}
        <span class="error">Voit lyhentää vain http- ja https-linkkejä.</span>
        {% elif illegalurl %}
        <span class="error">Linkissä on jotain outoa.</span>
        {% endif %}
    </div>
    <div>
        <input type="hidden" name="default_name" value="{{default_name}}">
        <span>lyli.fi/</span><input type="text" name="name" id="name" placeholder="{{default_name}}" value="{{name}}" autocapitalize="off"><br>
        {% if nameinuse %}
        <span class="error">lyli.fi/{{nameinuse}} on jo käytössä.</span>
        {% elif illegalname %}
        <span class="error">Päätteessä ei saa olla sanavälejä, pisteitä eikä kauttaviivoja.</span>
        {% else %}
        <span class="description">Lyhyt linkki, joka vie samalle sivulle kuin pitkä linkki.</span>
        {% endif %}
    </div>

    {% if showoptions %}
    {#<div>
        <input type="checkbox" name="brief" id="brief" value="true">
        <label for="brief">Poista lyhennys tunnin päästä.</label>
    </div>#}
    <div>
        {#<label for="duration">Poista lyhennys</label>
        <select id="duration">
            <option value="2vko">kun sitä ei ole käytetty kahteen viikkoon</option>
            <option value="1h">tunnin päästä</option>
            <option value="kerta">ensimmäisen avauksen jälkeen</option>
        </select>#}
        <input type="radio" name="duration" value="normal" id="normal" checked />
        <label for="normal">Poista lyhennys kun sitä ei ole käytetty kahteen viikkoon</label><br>
        <input type="radio" name="duration" value="brief" id="brief" />
        <label for="brief">Poista lyhennys tunnin päästä</label><br>
        <input type="radio" name="duration" value="once" id="once" />
        <label for="once">Poista lyhennys ensimmäisen avauksen jälkeen</label><br>
    </div>
    {% endif %}
    
    <button type="submit">Lyhennä</button>
</form>
{% endblock %}
